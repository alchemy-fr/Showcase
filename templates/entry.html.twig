{% extends "base.html.twig" %}

{% block head %}
    {{ parent() }}
    <link href="http://vjs.zencdn.net/c/video-js.css" rel="stylesheet">
    <script src="http://vjs.zencdn.net/c/video.js"></script>
{% endblock %}

{% block title %}- {{ entry.getTitle() }}{% endblock %}

{% block headerTitle %}
    <p>
        {% set feedInId = feed.getId() %}
        {% for feed in feeds %}
            {% set feedId = feed.getId() %}
            {% if feedId == feedInId %}
                <a href="/feed/{{ feed.getId() }}/0/5" class="active">{{ feed.getTitle() }}</a>
            {% else %}
                <a href="/feed/{{ feed.getId() }}/0/5">{{ feed.getTitle() }}</a>
            {% endif %}
            {% if not loop.last %}
                <span class="slash">/</span>
            {% endif %}
        {% endfor %}
    </p>
{% endblock %}

{% block content %}
    <div class="contentArticle span10 offset1">
        <div id="textArticle">
            <h1>{{ entry.getTitle() }}</h1>
            <p>
                <span class="infosArticle">Date de publication : </span>{{ entry.getCreatedOn() | date('d/m/Y') }}.<br />
                <span class="infosArticle">Derni&egrave;re &eacute;dition : </span>{{ entry.getUpdatedOn() | date('d/m/Y') }}.<br />
                <span class="infosArticle">Auteur : </span>{{ entry.getAuthorName() }}<br />
            </p>
            <p>
                <span class="infosArticle">Description : </span>{{ entry.getSubtitle() }}<br />
                <span class="infosArticle">M&eacute;dias : </span>                
                {% set items = entry.getItems() %}
                {% if items | length > 1 %}
                    {{ items | length }} m&eacute;dias pr&eacute;sents dans cette publication.
                {% elseif items | length == '1' %}
                    1 m&eacute;dia pr&eacute;sent dans cette publication.
                {% else %}
                    Aucun m&eacute;dia pr&eacute;sent dans cette publication.
                {% endif %}
            </p>
            <a class="logoMinus" href="/feed/{{ feed.getId() }}/0/5"></a>
        </div>
    </div>
    {% if items | length > 0 %}
            {#{% set record = item.getRecord() %}
            {% set thumbnail = record.getThumbnail() %}
            {% set permalink = thumbnail.getPermalink() %}
            <img src="{{ permalink.getUrl() }}" alt="{{ entry.getTitle() }}" />#}
            {#{% for entry in entries %}
                <h2>authorName</h2> {{ entry.getAuthorName }}
                <h2>title</h2> {{ entry.getTitle }}
                <h2>subtitle</h2> {{ entry.getSubtitle }}
                <h2>createdOn</h2> {{ entry.getCreatedOn | date('d-m-Y') }}
                {% set items = entry.getItems %}
                {% if items | length > 0 %}
                <h3>{{items | length}} item dans l'entry</h3>
                {% for item in items %}
                    <hr />
                    {% set record = item.getRecord %}
                    <h4>title</h4>{{record.getTitle}}
                    <h4>type</h4>{{record.getPhraseaType}}
                    {% set thumbnail = record.getThumbnail %}
                    <h4>player_type</h4>{{thumbnail.getPlayerType}}
                    <h4>height</h4>{{thumbnail.getHeight}}
                    <h4>width</h4>{{thumbnail.getWidth}}
                    {% set permalink = thumbnail.getPermalink %}
                    <h4>URL</h4>{{permalink.getUrl}}
                {% endfor %}
                {% endif %}
            {% endfor %}#}
                
        <div class="imgArticle span8 offset2">
            <div id="carouselArticle" class="carousel">
                <!-- Carousel items -->
                <div class="carousel-inner">
                    {% for item in items %}
                        {% set record = item.getRecord() %}
                        {% set thumbnail = record.getThumbnail() %}
                        {% set permalink = thumbnail.getPermalink() %}
                        {% if loop.first %}
                            <div class="item active">
                        {% else %}
                            <div class="item">     
                        {% endif %}
                            <table border="0" cellpadding="0" cellspacing="0">
                                <tr>
                                    <td valign="center" align="center">
                                        <img src="{{ permalink.getUrl() }}" />
                                    </td>
                                </tr>
                            </table>
                            <div class="carousel-caption">
                                <h4>{{ record.getTitle() }}</h4>
                                <p>MimeType : {{ record.getMimeType() }}</p>
                            </div>
                        </div>
                    {% endfor %}

                    <div class="item">
                        <table border="0" cellpadding="0" cellspacing="0">
                            <tr>
                                <td valign="center" align="center">
                                    <video id="my_video_1" class="video-js vjs-default-skin" controls
                                        preload="auto" width="640" height="264" poster="my_video_poster.png"
                                        data-setup="{}">
                                        <source src="my_video.mp4" type='video/mp4'>
                                        <source src="my_video.webm" type='video/webm'>
                                    </video>
                                </td>
                            </tr>
                        </table>
                        <div class="carousel-caption">
                            <h4>test video</h4>
                            <p>MimeType : video/mp4</p>
                        </div>
                    </div>                    

                </div>
                <!-- Carousel nav -->
                <a class="carousel-control left" href="#carouselArticle" data-slide="prev">&lsaquo;</a>
                <a class="carousel-control right" href="#carouselArticle" data-slide="next">&rsaquo;</a>
            </div>
        </div>
    {% else %}

    {% endif %}


{% endblock %}

{% block footer %}
    <p>
        {% set feedInId = feed.getId() %}
        {% for feed in feeds %}
            {% set feedId = feed.getId() %}
            {% if feedId == feedInId %}
                <a href="/feed/{{ feed.getId() }}/0/5" class="active">{{ feed.getTitle() }}</a>
            {% else %}
                <a href="/feed/{{ feed.getId() }}/0/5">{{ feed.getTitle() }}</a>
            {% endif %}
            {% if not loop.last %}
                <span class="slash">/</span>
            {% endif %}
        {% endfor %}
    </p>
{% endblock %}
